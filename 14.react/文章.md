![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/71b121e8948f4207bc336694ea1c93a8~tplv-k3u1fbpfcp-zoom-1.image)'
## 前言
 秋招来临，听闻快手是React+ts技术栈，最近在准备提升自己的React实战能力，快手的技术老铁们，告知我公司已全面升级到react hooks函数式 编程风格，读到了神三元在掘金的[React Hooks 与 Immutable 数据流实战](https://juejin.im/book/6844733816460804104)，霍然有种 梦里寻他千百度，hooks最佳实战在 三元处的感觉。于是，自己动手写一个仿极客时间APP的实战项目，提高自己的实战能力。

> [在线体验地址](http://nidelemonya.cn/build/#/explore)
>
> [github地址](https://github.com/guanliping111/React-geek-time)


项目整体使用的技术栈：react hooks + redux + mocker-api + express + immutable


项目优化：
1. 图片懒加载
2. 路由懒加载: react-lazyload，React自带的路由懒加载，进行性能优化。
3. memo：页面优化，减少组件的重复渲染。
4. better-scroll：超级好用的scroll基础组件，滚动列表，提高用户体验。
5. styled-component：组件化，引入style-component，爱上切页面。
6. 路由：react-router-config 让网页地址更清晰
7. 防抖：使用户体验更佳。
问题：create-react-app 3.4之后的版本，在return方法中 不能对dom元素添加注释，这样在后期项目打包上线 npm run build 的时候会发生数据请求，静态资源错误。可以使用 正则表达式匹配项目中return后面的// 注释。\(\s*\n?\s*//
## 项目效果如下：
![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6bd5a4815cb84ac0adf50bc11bec617d~tplv-k3u1fbpfcp-zoom-1.image)
## 项目结构
对项目结构的整体架构，是学习神三元react架构思想的第一步，也是自己写实战项目重要的一步。
- 全栈项目：一分为二的思想，前后端分离
- api 架构：深入分析 axios配置文件config性更好, request 每个结构返回一个promise对象的函数,通过看函数，就可以把握应用业务全局。

- 组件思想：页面与组件分离，把页面开发当成搭积木。
- 后端API设计流程
    1. mongodb/mysql 写真后端
        mockerAPI 解决了跨域
    2. 模块化输出api配置
    3. require json -> reducer -> connet -> 组件

    - 数据请求都放在actions中
    异步的actions中 dispatch多个action
- 项目整体目录结构如下：
```
├─React-geek-time
  ├─ geek-time_backend   //前端部分
  │  ├─ index.js
  │  ├─ mocker   		 //提供假数据
  │  │  ├─ data			 //数据
  │  │  └─ mocker.js	 //数据请求
  ├─ geek-time_frontend  //后端部分
```
- 前端目录结构如下

```
├─src
  ├─ api 		// 数据请求接口及数据
  ├─ App.css		
  ├─ App.js
  ├─ assets		// 静态资源
  ├─ common		// 公用组件
  ├─ components	// 子组件
  ├─ index.css
  ├─ index.js	// 入口文件
  ├─ layouts	// 布局页面
  ├─ pages		// 页面
  │  ├─ explore	// 发现页面
  │  ├─ forum	// 讲堂页面
  │  ├─ my		// 我的页面
  │  ├─ payment	// 支付页面
  │  ├─ study	// 学习页面
  │  └─ tribe	// 部落页面
  ├─ routes		// 路由
  └─ store		// 总的store redux 模块化
```
## 前端部分
这里前端部分主要是对 路由配置及懒加载、`styled-component`样式、`redux`结构的设计、`scroll`基础组件及`memo`性能优化的使用讲解。
### 路由
- 路由配置： routes/index.js 部分代码如下：
  1.  react-router-config：路由的设置，能够更清晰的看到网页地址。
  
  ![路由1](C:\Users\Lenovo\Desktop\路由1.png)
  
  1.  react-lazyload：路由懒加载。
  
  
  
  使用`React.lazy`和`Suspense`来实现路由懒加载组件进行优化，可以理解成，先存放不加载就是`lazy` ，需要时即满足渲染条件就开始加载，就是`Suspense `，这样可以快速打开页面。
  
  React文档对React.lazy的说法：
  
  > React.lazy必须通过调用动态的`import()`加载一个函数，此时会返回一个`Promise`，并解析(`resolve`)为一个带有包含React组件的默认导出的模块。
  
  我们使用`Suspense`，它必须是延迟加载组件的父级(**即React.lazy加载的组件只能在<React.Suspense>组件下使用**)
  
  ![路由3](C:\Users\Lenovo\Desktop\路由3.png)
###  styled-component

- styled-components 专门解决切页面， 不用过于组件化的方法

### redux 结构的设计
### scroll 基础组件
### memo 的使用
## 后端部分
后端主要实现假数据的模拟和数据请求，使用**mockjs模拟假数据**方便前后端对接，**axios的GET和POST请求封装**，**express使用代理**，解决跨域问题。 



### mockjs模拟假数据
### axios的GET和POST请求封装
### express
## 结语
在学习reducer时，感觉很难，我经过一下练习之后，发现简单很多。