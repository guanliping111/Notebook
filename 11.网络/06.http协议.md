### http和https的区别

##### 基本概念：

- HTTP：网络协议，客户端和服务器端请求和应答的标准（TCP），用于从WWW服务器传输超文本到本地浏览器的传输协议，它可以使浏览器更加高效，使网络传输减少。

  安全风险：1. 隐私泄露，传输内容可被中间人截取。

  ​				  2. 页面劫持, 直接篡改用户的浏览页面。

- HTTPS: 是以安全为目标的HTTP通道，简单讲是HTTP的安全版，即HTTP下加入SSL层，HTTPS的安全基础是SSL，因此加密的详细内容就需要SSL。

  作用：1. 建立一个信息安全通道，来保证数据传输的安全。2. 确认网站的真实性

  ![img](http://mmbiz.qpic.cn/mmbiz_jpg/6OxqSqWBqsISiczvyZpVLJD2taHokoCn1mGWINErFhuBHQ5wKycfXLzOejFgHYp8xFD2ibmZFVSzo1Uib4XyulwmA/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

##### 区别：为什么https 就更安全呢？

http 协议是明文传输数据，在传输过程中容易被窃取或者篡改，容易遭受中间人攻击。

所以为了访问更加安全，我们引入了加密方案，在 TCP 和 HTTP 之间插入了一个安全层。安全层有两个职责，对发起 http 请求的数据进行加密操作和对接收到http的内容进行解密操作。

加密方法：

1.  对称加密 ：加密和解密使用的都是相同的密钥 （速度快 安全性低）
2. 非对称加密：有两把A、B两把密钥，如果你使用 A密钥来加密，那么只能使用B密钥来解密；反过来，如果你要用B密钥加密，那么只能使用A密钥来解密。(速度慢 安全性比较高)
3. 对称加密和非对称加密搭配使用: 黑客可以通过dns劫持，这样访问的就是黑客的服务器了。
4. 添加CA数字证书 （更安全的做法）

![](http://mmbiz.qpic.cn/mmbiz_png/6OxqSqWBqsISiczvyZpVLJD2taHokoCn1icyG2QSaJzaOdJ0YrqEmntRofw4UlUgibibzuZgRMbUGuBfKvvK3sibJng/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

1. HTTPS协议需要到CA申请证书，一般免费证书很少，需要交费。

2. HTTP协议连接很简单,是无状态的。运行在TCP之上，所有传输的内容都是明文。

   HTTPS比较安全，运行在SSL/TLS之上，SSL/TLS运行在TCP之上，所有 传输的内容都经过加密的。

3. HTTP和HTTPS使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。

4. HTTPS可以有效的防止运营商劫持，解决了防劫持的一个大问题。

### http0.9、http1.x 和  http2.x 有哪些区别？

- http0.9 超文本传输协议

- http1.x 改进了持久连接，提供虚拟主机的支持

  - HTTP1.X是文本(字符串)传送
  - 队头阻塞，一次连接完成一次请求

- http 2.x

  - 使用二进制传输，相对更加安全可靠

    二进制传送的单位是帧和流。帧组成了流，同时流还有流ID标示，通过流ID就牵扯出了第二个区别

  - 多路复用，建立一条连接，可以完成多条请求

    可以实现多个http请求传输，通过ID流来标识哪个流请求哪个http

  - 对协议报使用压缩，降低了网络开销

    HTTP2通过gzip和compress压缩头部然后再发送，同时客户端和服务器端同时维护一张头信息表，所有字段都记录在这张表中，这样后面每次传输只需要传输表里面的索引 id 就 行，通过索引 id 就可以知道表头的值了

  - 允许服务器主动推送消息到客户端

    HTTP2支持在客户端未经请求许可的情况下，主动向客户端推送内容

### HTTP 协议 

访问 www.163.com 这个域名 

发送给 DNS 服务器，让它解析为 IP 地址。 

HTTP 是基于 TCP 协议的，要先建⽴ TCP 连接

⽬前使⽤的 HTTP 协议⼤部分都是 1.1。在 1.1 的协议⾥⾯，默认是开启了 Connection：Keep- Alive（Connection 头决定当前的事务完成后，是否会关闭⽹络连接。如果该值是“keep-alive”， ⽹络连接就是持久的，不会关闭，使得对同⼀个服务器的请求可以继续在该连接上完成。） 的，这样建⽴的 TCP 连接，就可以在多次请求中复⽤。 

#### HTTP请求

建⽴了连接以后，浏览器就要发送 HTTP 的请求。 

![http请求](E:\workspace\学习图片\http请求.png)

第⼀部分是请求⾏，第⼆部分是请求的⾸部，第三部分才是请求的正⽂实体。 

#### 首部字段

Accept-Charset，表⽰客⼾端可以接受的字符集。防⽌传过来的是另外的字符集，从⽽导致出现乱码。

Content-Type 是指正⽂的格式 

#### HTTP 返回

![http返回](E:\workspace\学习图片\http返回.png)

### HTTP 2.0 

HTTP 1.1 在应⽤层以纯⽂本的形式进⾏通信。每次通信都要带完整的 HTTP 的头，每次的过程总是像 上⾯描述的那样⼀去⼀回。这样在实时性、并发性上都存在问题。 

**头部压缩**：HTTP 2.0 会对 HTTP 的头进⾏⼀定的压缩，将原来每次都要携带的⼤量 key value 在两端 建⽴⼀个索引表，对相同的头只发送索引表中的索引。 

- **多路复⽤**：HTTP 2.0 协议将⼀个 TCP 的连接中，切分成多个流，每个流都有⾃⼰的 ID，⽽且**流可 以是客⼾端发往服务端，也可以是服务端发往客⼾端（服务端推送）。流是有 优先级 的**。 

- **分帧、⼆进制编码**：HTTP 2.0 还将所有的传输信息分割为更⼩的消息和帧，并对它们采⽤⼆进制 格式编码。常⻅的帧有 Header 帧，⽤于传输 Header 内容，并且会开启⼀个新的流。再就是 Data 帧，⽤来传输正⽂实体，多个 Data 帧属于同⼀个流。 

通过这两种机制，HTTP 2.0 的客⼾端可以将多个请求分到不同的流中，然后将请求内容拆成帧，进⾏ ⼆进制传输。这些帧可以打散乱序发送， 然后根据每个帧⾸部的流标识符 重新组装 ，并且可以根据 优先级，决定优先处理哪个流的数据。 

我们来举⼀个例⼦：假设我们的⼀个⻚⾯要发送三个独⽴的请求，⼀个获取 css，⼀个获取 js，⼀个获取图⽚ jpg。如果使⽤ HTTP 1.1 就是串⾏的，但是如果使⽤ HTTP 2.0，就可以在⼀个连接⾥，客⼾端和服务端都可以同时发送多个请求或回应，⽽且不⽤按照顺序⼀对⼀对应。 

![http2.0](E:\workspace\学习图片\http2.0.png)

HTTP 2.0 其实是将三个请求变成三个流，将数据分成帧，乱序发送到⼀个 TCP 连接中。

HTTP 2.0 成功解决了 HTTP 1.1 的 队⾸阻塞 问题（服务端必须按照请求发送的顺序返回响应，那如果 ⼀个响应返回延迟了，那么其后续的响应都会被延迟，直到队头的响应送达），同时将⻚⾯的多个数 据 css、js、 jpg 等通过⼀个数据链接进⾏传输，能够加快⻚⾯组件的传输速度。 

#### http2.0 很完美吗？？ 

**TCP 的 队⾸阻塞**：因为 HTTP 2.0 也是基于 TCP 协议的，TCP 协议在处理包时是有严格顺序的。当其 中⼀个数据包遇到问题，TCP 连接需要等待这个包完成重传之后才能继续进⾏。 

### QUIC 协议 

基于 UDP 

- ⾃定义连接机制 

- ⾃定义重传机制 

- ⾃定义流量控制